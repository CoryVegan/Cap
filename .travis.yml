sudo: required

services:
  - docker

notifications:
  email: false

language: python

before_install:
  - docker pull dalg24/cap-stack

install:
  - pip install -q codecov

script:
  - docker --version
  - pwd
  - docker run
        -v ${TRAVIS_BUILD_DIR}:/scratch/source/cap
        dalg24/cap-stack
        /scratch/source/cap/docker/build_cap.sh

after_success:
  - codecov
        --disable gcov search pycov
        --file lcov.info coverage.xml
